# Stale Issues and PRs Management
# Author: Santhosh T / LxusBrain
#
# Automatically marks issues and PRs as stale after a period of inactivity

name: Stale Issues and PRs

on:
  schedule:
    # Run daily at midnight UTC
    - cron: "0 0 * * *"
  workflow_dispatch:

permissions:
  issues: write
  pull-requests: write

jobs:
  stale:
    name: Mark Stale Issues and PRs
    runs-on: ubuntu-latest

    steps:
      - name: Mark stale issues and PRs
        uses: actions/stale@v9
        with:
          # Issue configuration
          stale-issue-message: |
            This issue has been automatically marked as stale because it has not had recent activity.
            It will be closed in 14 days if no further activity occurs.

            If this issue is still relevant:
            - Add a comment with any updates
            - Remove the `stale` label

            Thank you for your contributions!
          stale-issue-label: "stale"
          days-before-issue-stale: 60
          days-before-issue-close: 14
          exempt-issue-labels: "pinned,security,in-progress,help-wanted,good-first-issue"

          # PR configuration
          stale-pr-message: |
            This pull request has been automatically marked as stale because it has not had recent activity.
            It will be closed in 14 days if no further activity occurs.

            If this PR is still relevant:
            - Rebase/update the branch
            - Add a comment with any updates
            - Request a review

            Thank you for your contributions!
          stale-pr-label: "stale"
          days-before-pr-stale: 30
          days-before-pr-close: 14
          exempt-pr-labels: "pinned,security,in-progress,do-not-close"

          # Close messages
          close-issue-message: |
            This issue has been automatically closed due to inactivity.
            Feel free to reopen if this is still relevant.
          close-pr-message: |
            This pull request has been automatically closed due to inactivity.
            Feel free to reopen if you'd like to continue working on this.

          # Operation limits
          operations-per-run: 100

          # Ignore issues/PRs with these labels when marking stale
          exempt-all-assignees: true

          # Don't stale issues with milestones
          exempt-all-milestones: true
